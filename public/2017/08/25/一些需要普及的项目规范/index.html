<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>一些需要普及的项目规范 | 徐靖峰|个人博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="介绍好的开发规范不仅能够使得项目变得易维护，易升级。一些通用的规范可以参考《阿里巴巴java开发手册》本文档主要针对我们项目内部正在使用的框架提出一些开发规范，欢迎补充 包结构规范以短信邮件项目（mail-sms）为例，介绍包结构命名规范。">
<meta name="keywords" content="代码规范,技术杂谈">
<meta property="og:type" content="article">
<meta property="og:title" content="一些需要普及的项目规范">
<meta property="og:url" content="http://lexburner.github.io/2017/08/25/一些需要普及的项目规范/index.html">
<meta property="og:site_name" content="徐靖峰|个人博客">
<meta property="og:description" content="介绍好的开发规范不仅能够使得项目变得易维护，易升级。一些通用的规范可以参考《阿里巴巴java开发手册》本文档主要针对我们项目内部正在使用的框架提出一些开发规范，欢迎补充 包结构规范以短信邮件项目（mail-sms）为例，介绍包结构命名规范。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://lexburner.github.io/css/images/post/package1.png">
<meta property="og:updated_time" content="2017-08-25T04:40:40.550Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一些需要普及的项目规范">
<meta name="twitter:description" content="介绍好的开发规范不仅能够使得项目变得易维护，易升级。一些通用的规范可以参考《阿里巴巴java开发手册》本文档主要针对我们项目内部正在使用的框架提出一些开发规范，欢迎补充 包结构规范以短信邮件项目（mail-sms）为例，介绍包结构命名规范。">
<meta name="twitter:image" content="http://lexburner.github.io/css/images/post/package1.png">
    

    

    

    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/vendor/open-sans/styles.css">
    <link rel="stylesheet" href="/vendor/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/vendor/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/vendor/lightgallery/css/lightgallery.min.css">
    
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">徐靖峰|个人博客</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">主页</a>
                
                    <a class="main-nav-link" href="/categories">分类</a>
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
                    <a class="main-nav-link" href="/about">关于</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">主页</a></td>
                
                    <td><a class="main-nav-link" href="/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">徐靖峰</h2>
            <h3 id="title">JAVA Developer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Shanghai, China</span>
            <a id="follow" target="_blank" href="https://github.com/lexburner">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                35
                <span>文章</span>
            </div>
            <div class="article-info-block">
                25
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/lexburner" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/css/images/wechat.png" target="_blank" title="wechat" class=tooltip>
                            <i class="fa fa-wechat"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-一些需要普及的项目规范" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            一些需要普及的项目规范
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/08/25/一些需要普及的项目规范/">
            <time datetime="2017-08-25T04:18:45.000Z" itemprop="datePublished">2017-08-25</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术杂谈/">技术杂谈</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/代码规范/">代码规范</a>, <a class="tag-link" href="/tags/技术杂谈/">技术杂谈</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
             <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>好的开发规范不仅能够使得项目变得易维护，易升级。一些通用的规范可以参考《阿里巴巴java开发手册》<br>本文档主要针对我们项目内部正在使用的框架提出一些开发规范，欢迎补充</p>
<h2 id="包结构规范"><a href="#包结构规范" class="headerlink" title="包结构规范"></a>包结构规范</h2><p>以短信邮件项目（mail-sms）为例，介绍包结构命名规范。</p>
<a id="more"></a><img src="/css/images/post/package1.png" alt="项目目录结构"><br><br>短信邮件项目主要包含短信，邮件两个子模块<br><br>【强制】 <strong>包分层–通用</strong><br>一般每个项目都包含下面六个模块，还有一些各自扩展的模块<br><br>| api            | api-impl | app  | admin | web  | model |<br>| ————– | ——– | —- | —– | —- | —– |<br>| api接口定义，用于暴露服务 | api接口实现  | 应用   | 后台页面  | 前台页面 | 实体    |<br><br>关于项目结构的介绍可以参考《项目结构说明.md》,他们的包分层应当统一<br><br>| 模块       | 包                        |<br>| ——– | ———————— |<br>| api      | sinosoftgz.message.api   |<br>| api-impl | sinosoftgz.message.api   |<br>| admin    | sinosoftgz.message.admin |<br>| model    | sinosoftgz.message.model |<br>| web      | sinosoftgz.message.web   |<br>| app      | sinosoftgz.message.app   |<br><br>格式如下：公司名.模块名.层次名<br>包名应当尽量使用能够概括模块总体含义,单词义,单数,不包含特殊字符的单词<br>【正例】: <code>sinosoftgz.message.admin</code><br>【反例】: <code>sinosoftgz.mailsms.admin</code> <code>sinosoftgz.mail.sms.admin</code><br><br>【推荐】<strong>包分层–业务</strong><br>当项目模块的职责较为复杂，且考虑到以后拓展的情况下，单个模块依旧包含着很多小的业务模块时，应当优先按照业务区分包名<br>【正例】:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">sinosoftgz.message.admin</div><div class="line">    config</div><div class="line">        模块公用Config.java</div><div class="line">    service</div><div class="line">        模块公用Service.java</div><div class="line">    web</div><div class="line">        模块公用Controller.java</div><div class="line">        IndexController.java</div><div class="line">    mail</div><div class="line">        config</div><div class="line">            MailConfig.java</div><div class="line">        service</div><div class="line">            Mail私有Service.java</div><div class="line">            MailTemplateService.java</div><div class="line">            MailMessageService.java</div><div class="line">        web</div><div class="line">            Mail私有Controller.java</div><div class="line">            MailTemplateController.java</div><div class="line">            MailMessageController.java</div><div class="line">    sms</div><div class="line">        config</div><div class="line">            Smsconfig.java</div><div class="line">        service</div><div class="line">            Sms私有Service.java</div><div class="line">            SmsTemplateService.java</div><div class="line">            SmsMessageService.java</div><div class="line">        web</div><div class="line">            Sms私有Controller.java</div><div class="line">            SmsTemplateController.java</div><div class="line">            SmsMessageController.java</div><div class="line">    MessageAdminApp.java</div></pre></td></tr></table></figure>
<p>【反例】:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">sinosoftgz.message.admin</div><div class="line">    config</div><div class="line">        模块公用Config.java</div><div class="line">    service</div><div class="line">        模块公用Service.java</div><div class="line">        mail</div><div class="line">            Mail私有Service.java</div><div class="line">            MailTemplateService.java</div><div class="line">            MailMessageService.java</div><div class="line">        sms</div><div class="line">            Sms私有Service.java</div><div class="line">            SmsTemplateService.java</div><div class="line">            SmsMessageService.java</div><div class="line">    web</div><div class="line">        模块公用Controller.java</div><div class="line">        IndexController.java</div><div class="line">        mail</div><div class="line">            Mail私有Controller.java</div><div class="line">            MailTemplateController.java</div><div class="line">            MailMessageController.java</div><div class="line">        sms</div><div class="line">            Sms私有Controller.java</div><div class="line">            SmsTemplateController.java</div><div class="line">            SmsMessageController.java</div><div class="line">    MailSmsAdminApp.java</div></pre></td></tr></table></figure></p>
<p>service和controller以及其他业务模块相关的包相隔太远，或者干脆全部丢到一个包内，单纯用前缀区分，会形成臃肿，充血的包结构。如果是项目结构较为单一，可以仅仅使用前缀区分；如果是项目中业务模块有明显的区分条件，应当单独作为一个包，用包名代表业务模块的含义。</p>
<h2 id="数据库规范"><a href="#数据库规范" class="headerlink" title="数据库规范"></a>数据库规范</h2><p>【强制】必要的地方必须添加索引，如唯一索引，以及作为条件查询的列<br>【强制】生产环境，uat环境，不允许使用<code>jpa.hibernate.ddl-auto: create</code>自动建表，每次ddl的修改需要保留脚本，统一管理<br>【强制】业务数据不能使用deleteBy…而要使用逻辑删除setDelete(true),查询时，findByxxxAndisDelete(xxx,false)</p>
<h2 id="ORM规范"><a href="#ORM规范" class="headerlink" title="ORM规范"></a>ORM规范</h2><p>【强制】条件查询超过三个参数的，使用<code>criteriaQuery</code>，<code>predicates</code> 而不能使用springdata的findBy<br>【正例】<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Page&lt;MailTemplateConfig&gt; <span class="title">findAll</span><span class="params">(MailTemplateConfig mailTemplateConfig, Pageable pageable)</span> </span>&#123;</div><div class="line">        Specification querySpecification = (Specification&lt;MailTemplateConfig&gt;) (root, criteriaQuery, criteriaBuilder) -&gt; &#123;</div><div class="line">            List&lt;Predicate&gt; predicates = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">            predicates.add(criteriaBuilder.isFalse(root.get(<span class="string">"deleteFlag"</span>)));</div><div class="line">            <span class="comment">//级联查询mailTemplate</span></div><div class="line">            <span class="keyword">if</span> (!Lang.isEmpty(mailTemplateConfig.getMailTemplate())) &#123;</div><div class="line">                <span class="comment">//短信模板名称</span></div><div class="line">                <span class="keyword">if</span> (!Lang.isEmpty(mailTemplateConfig.getMailTemplate().getTemplateName())) &#123;</div><div class="line">                    predicates.add(criteriaBuilder.like(root.join(<span class="string">"mailTemplate"</span>).get(<span class="string">"templateName"</span>), String.format(<span class="string">"%%%s%%"</span>, mailTemplateConfig.getMailTemplate().getTemplateName())));</div><div class="line">                &#125;</div><div class="line">                <span class="comment">//短信模板类型</span></div><div class="line">                <span class="keyword">if</span> (!Lang.isEmpty(mailTemplateConfig.getMailTemplate().getTemplateType())) &#123;</div><div class="line">                    predicates.add(criteriaBuilder.equal(root.join(<span class="string">"mailTemplate"</span>).get(<span class="string">"templateType"</span>), mailTemplateConfig.getMailTemplate().getTemplateType()));</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//产品分类</span></div><div class="line">            <span class="keyword">if</span> (!Lang.isEmpty(mailTemplateConfig.getProductType())) &#123;</div><div class="line">                predicates.add(criteriaBuilder.equal(root.get(<span class="string">"productType"</span>), mailTemplateConfig.getProductType()));</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//客户类型</span></div><div class="line">            <span class="keyword">if</span> (!Lang.isEmpty(mailTemplateConfig.getConsumerType())) &#123;</div><div class="line">                predicates.add(criteriaBuilder.equal(root.get(<span class="string">"consumerType"</span>), mailTemplateConfig.getConsumerType()));</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> criteriaBuilder.and(predicates.toArray(<span class="keyword">new</span> Predicate[predicates.size()]));</div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">return</span> mailTemplateConfigRepos.findAll(querySpecification, pageable);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>【说明】条件查询是admin模块不可避免的一个业务功能，使用<code>criteriaQuery</code>可以轻松的添加条件，使得代码容易维护，他也可以进行分页，排序，连表操作，充分发挥jpa面向对象的特性，使得业务开发变得快捷。<br>【反例】</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Page&lt;GatewayApiDefine&gt; <span class="title">findAll</span><span class="params">(GatewayApiDefine gatewayApiDefine,Pageable pageable)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(Lang.isEmpty(gatewayApiDefine.getRole()))&#123;</div><div class="line">            gatewayApiDefine.setRole(<span class="string">""</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(Lang.isEmpty(gatewayApiDefine.getApiName()))&#123;</div><div class="line">            gatewayApiDefine.setApiName(<span class="string">""</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(Lang.isEmpty(gatewayApiDefine.getEnabled()))&#123;</div><div class="line">            <span class="keyword">return</span> gatewayApiDefineDao.findByRoleLikeAndApiNameLikeOrderByLastUpdatedDesc(<span class="string">"%"</span>+gatewayApiDefine.getRole()+<span class="string">"%"</span>,<span class="string">"%"</span>+gatewayApiDefine.getApiName()+<span class="string">"%"</span>,pageable);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">return</span> gatewayApiDefineDao.findByRoleLikeAndApiNameLikeAndEnabledOrderByLastUpdatedDesc(<span class="string">"%"</span>+gatewayApiDefine.getRole()+<span class="string">"%"</span>,<span class="string">"%"</span>+gatewayApiDefine.getApiName()+<span class="string">"%"</span>,gatewayApiDefine.getEnabled(),pageable);</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>【说明】在Dao层定义了大量的findBy方法，在Service写了过多的if else判断，导致业务逻辑不清晰</p>
<h2 id="禁止使用魔鬼数字"><a href="#禁止使用魔鬼数字" class="headerlink" title="禁止使用魔鬼数字"></a>禁止使用魔鬼数字</h2><p>【模型层与业务层】<br>一些固定业务含义的代码可以使用枚举类型，或者final static常量表示，在设值时，不能直接使用不具备业务含义的数值。<br>【正例】：使用final static常量:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//实体类定义</span></div><div class="line">	<span class="comment">/**</span></div><div class="line"><span class="comment">     * 发送设置标志</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * <span class="doctag">@see</span> sendFlag</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String SEND_FLAG_NOW = <span class="string">"1"</span>; <span class="comment">//立即发送</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String SEND_FLAG_DELAY = <span class="string">"2"</span>; <span class="comment">//预设时间发送</span></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 发送成功标志</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * <span class="doctag">@see</span> sendSuccessFlag</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> Map&lt;String, String&gt; SEND_SUCCESS_FLAG_MAP = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String SEND_WAIT = <span class="string">"0"</span>;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String SEND_SUCCESS = <span class="string">"1"</span>;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String SEND_FAIL = <span class="string">"2"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        SEND_SUCCESS_FLAG_MAP.put(SEND_WAIT, <span class="string">"未发送"</span>);</div><div class="line">        SEND_SUCCESS_FLAG_MAP.put(SEND_SUCCESS, <span class="string">"发送成功"</span>);</div><div class="line">        SEND_SUCCESS_FLAG_MAP.put(SEND_FAIL, <span class="string">"发送失败"</span>);</div><div class="line">    &#125;</div><div class="line">	<span class="comment">/**</span></div><div class="line"><span class="comment">     * 发送设置标志 (1：立即发送 2：预设时间发送 )</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="meta">@Column</span>(columnDefinition = <span class="string">"varchar(1) comment '发送设置标志'"</span>)</div><div class="line">    <span class="keyword">protected</span> String sendFlag;</div><div class="line"></div><div class="line"><span class="comment">//业务代码赋值使用</span></div><div class="line">MailMessage mailMessage = <span class="keyword">new</span> MailMessage();</div><div class="line">mailMessage.setSendSuccessFlag(MailMessage.SEND_WAIT);</div><div class="line">mailMessage.setValidStatus(MailMessage.VALID_WAIT);</div><div class="line">mailMessage.setCustom(<span class="keyword">true</span>);</div></pre></td></tr></table></figure></p>
<p>【反例】<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//实体类定义</span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">  * 发送设置标志 (1：立即发送 2：预设时间发送 )</span></div><div class="line"><span class="comment">  */</span></div><div class="line"><span class="meta">@Column</span>(columnDefinition = <span class="string">"varchar(1) comment '发送设置标志'"</span>)</div><div class="line"><span class="keyword">protected</span> String sendFlag;</div><div class="line"><span class="comment">//业务代码赋值使用</span></div><div class="line">MailMessage mailMessage = <span class="keyword">new</span> MailMessage();</div><div class="line">mailMessage.setSendSuccessFlag(<span class="string">"1"</span>);</div><div class="line">mailMessage.setValidStatus(<span class="string">"0"</span>);</div><div class="line">mailMessage.setCustom(<span class="keyword">true</span>);</div></pre></td></tr></table></figure></p>
<p>【说明】魔鬼数字不能使代码一眼能够看明白到底赋的是什么值，并且，实体类发生变化后，可能会导致赋值错误，与预期赋值不符合且错误不容易被发现。</p>
<p>【正例】：也可以使用枚举类型避免魔鬼数字</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">protected</span> String productType;</div><div class="line"></div><div class="line">   <span class="keyword">protected</span> String productName;</div><div class="line"></div><div class="line">   <span class="meta">@Enumerated</span>(EnumType.STRING)</div><div class="line">   <span class="keyword">protected</span> ConsumerTypeEnum consumerType;</div><div class="line"></div><div class="line">   <span class="meta">@Enumerated</span>(EnumType.STRING)</div><div class="line">   <span class="keyword">protected</span> PolicyTypeEnum policyType;</div><div class="line"></div><div class="line">   <span class="meta">@Enumerated</span>(EnumType.STRING)</div><div class="line">   <span class="keyword">protected</span> ReceiverEnum receiver;</div><div class="line">   <span class="keyword">public</span> <span class="keyword">enum</span> ConsumerTypeEnum &#123;</div><div class="line">       PERSONAL, ORGANIZATION;</div><div class="line">   </div><div class="line">       <span class="function"><span class="keyword">public</span> String <span class="title">getLabel</span><span class="params">()</span> </span>&#123;</div><div class="line">       <span class="keyword">switch</span> (<span class="keyword">this</span>) &#123;</div><div class="line">       	<span class="keyword">case</span> PERSONAL:</div><div class="line">       		<span class="keyword">return</span> <span class="string">"个人"</span>;</div><div class="line">       	<span class="keyword">case</span> ORGANIZATION:</div><div class="line">       		<span class="keyword">return</span> <span class="string">"团体"</span>;</div><div class="line">       	<span class="keyword">default</span>:</div><div class="line">       		<span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">       &#125;</div><div class="line">     &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>【视图层】<br>例如，页面迭代select的option，不应该在view层判断，而应该在后台传入map在前台迭代<br>【正例】：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">model.put(<span class="string">"typeMap"</span>,typeMap);</div><div class="line"></div><div class="line">模板类型：&lt;select type=<span class="string">"text"</span> name=<span class="string">"templateType"</span>&gt;</div><div class="line">	&lt;option value=""&gt;全部&lt;/option&gt;</div><div class="line">	&lt;#list typeMap?keys as key&gt;</div><div class="line">		&lt;option &lt;#if ((mailTemplate.templateType!"")==key)&gt;selected="selected"&lt;/#if&gt;value="$&#123;key&#125;"&gt;$&#123;typeMap[key]&#125;&lt;/option&gt;</div><div class="line">	 &lt;/#list&gt;</div><div class="line">&lt;/select&gt;</div></pre></td></tr></table></figure></p>
<p>【反例】：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">模板类型：&lt;select type=<span class="string">"text"</span> name=<span class="string">"templateType"</span>&gt;</div><div class="line">	&lt;option value=""&gt;全部&lt;/option&gt;</div><div class="line">	&lt;option &lt;#if $&#123;xxx.templateType!&#125;=="1"</div><div class="line">		selected="selected"&lt;/#if&gt; value="1"&gt;承保通知&lt;/option&gt;</div><div class="line">	...</div><div class="line">	&lt;option &lt;#if $&#123;xxx.templateType!&#125;=="5"</div><div class="line">		selected="selected"&lt;/#if&gt; value="5"&gt;核保通知&lt;/option&gt;</div><div class="line">&lt;/select&gt;</div></pre></td></tr></table></figure></p>
<p>【说明】：否则修改后台代码后，前端页面也要修改，设计模式的原则，应当是修改一处，其他全部变化。且 1，2…,5的含义可能会变化，不能从页面得知value和option的含义是否对应。</p>
<h2 id="并发注意事项"><a href="#并发注意事项" class="headerlink" title="并发注意事项"></a>并发注意事项</h2><p>项目中会出现很多并发问题，要做到根据业务选择合适的并发解决方案，避免线程安全问题</p>
<p>【强制】simpleDateFormat有并发问题，不能作为static类变量<br>【反例】：<br>这是我在某个项目模块中，发现的一段代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Class XxxController&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> SimpleDateFormat simpleDateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd hh:mm:ss"</span>);</div><div class="line">	</div><div class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/xxxx"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">xxxx</span><span class="params">(String dateStr)</span></span>&#123;</div><div class="line">		XxxEntity xxxEntity = <span class="keyword">new</span> XxxEntity();</div><div class="line">		xxxEntity.setDate(simpleDateFormat.parse(dateStr));</div><div class="line">		xxxDao.save(xxxEntity);</div><div class="line">		<span class="keyword">return</span> <span class="string">"xxx"</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>【说明】SimpleDateFormat 是线程不安全的类，不能作为静态类变量给多线程并发访问。如果不了解多线程，可以将其作为实例变量，每次使用时都new一个出来使用。不过更推荐使用ThreadLocal来维护，减少new的开销。<br>【正例】一个使用ThreadLocal维护SimpleDateFormat的线程安全的日期转换类：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcurrentDateUtil</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;DateFormat&gt; threadLocal = <span class="keyword">new</span> ThreadLocal&lt;DateFormat&gt;() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> DateFormat <span class="title">initialValue</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">parse</span><span class="params">(String dateStr)</span> <span class="keyword">throws</span> ParseException </span>&#123;</div><div class="line">        <span class="keyword">return</span> threadLocal.get().parse(dateStr);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">format</span><span class="params">(Date date)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> threadLocal.get().format(date);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>【推荐】名称唯一性校验出现的线程安全问题<br>各个项目的admin模块在需求中经常会出现要求名称不能重复，即唯一性问题。通常在前台做ajax校验，后台使用<code>select count(1) from table_name where name=?</code>的方式查询数据库。这么做无可厚非，但是在极端的情况下，会出现并发问题。两个线程同时插入一条相同的name，如果没有做并发控制，会导致出现脏数据。如果仅仅是后台系统，那么没有必要加锁去避免，只需要对数据库加上唯一索引，并且再web层或者service层捕获数据异常即可。<br>【正例】：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//实体类添加唯一索引</span></div><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="meta">@Table</span>(name = <span class="string">"mns_mail_template"</span>,</div><div class="line">        uniqueConstraints = &#123;<span class="meta">@UniqueConstraint</span>(columnNames = &#123;<span class="string">"templateName"</span>&#125;)&#125;</div><div class="line">)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MailTemplate</span> <span class="keyword">extends</span> <span class="title">AbstractTemplate</span> </span>&#123;</div><div class="line">	<span class="comment">/**</span></div><div class="line"><span class="comment">     * 模板名称</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="meta">@Column</span>(columnDefinition = <span class="string">"varchar(160) comment '模板名称'"</span>)</div><div class="line">    <span class="keyword">private</span> String templateName;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//业务代码捕获异常</span></div><div class="line"><span class="meta">@RequestMapping</span>(value = &#123;<span class="string">"/saveOrUpdate"</span>&#125;, method = RequestMethod.POST)</div><div class="line">    <span class="meta">@ResponseBody</span></div><div class="line">    <span class="function"><span class="keyword">public</span> AjaxResponseVo <span class="title">saveOrUpdate</span><span class="params">(MailTemplate mailTemplate)</span> </span>&#123;</div><div class="line">        AjaxResponseVo ajaxResponseVo = <span class="keyword">new</span> AjaxResponseVo(AjaxResponseVo.STATUS_CODE_SUCCESS, <span class="string">"操作成功"</span>, <span class="string">"邮件模板定义"</span>, AjaxResponseVo.CALLBACK_TYPE_CLOSE_CURRENT);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            <span class="comment">//管理端新增时初始化一些数据</span></div><div class="line">            <span class="keyword">if</span> (Lang.isEmpty(mailTemplate.getId())) &#123;</div><div class="line">                mailTemplate.setValidStatus(MailTemplate.VALID_WAIT);</div><div class="line">            &#125;</div><div class="line">            mailTemplateService.save(mailTemplate);</div><div class="line">        &#125; <span class="keyword">catch</span> (DataIntegrityViolationException ce) &#123;</div><div class="line">            ajaxResponseVo.setStatusCode(AjaxResponseVo.STATUS_CODE_ERROR);</div><div class="line">            ajaxResponseVo.setMessage(<span class="string">"模板名称已经存在"</span>);</div><div class="line">            ajaxResponseVo.setCallbackType(<span class="keyword">null</span>);</div><div class="line">            logger.error(ce.getMessage());</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            ajaxResponseVo.setStatusCode(AjaxResponseVo.STATUS_CODE_ERROR);</div><div class="line">            ajaxResponseVo.setMessage(<span class="string">"操作失败!"</span>);</div><div class="line">            ajaxResponseVo.setCallbackType(<span class="keyword">null</span>);</div><div class="line">            logger.error(e.getMessage(), e);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ajaxResponseVo;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>【说明】关于其他一些并发问题,如分布式锁，CAS，不仅仅是一篇文档能够讲解清楚的，需要对开发有很深的理解，我还记录了一些并发问题，仅供参考：<a href="http://blog.csdn.net/u013815546/article/details/56481842%20%E6%B5%85%E6%9E%90%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91" target="_blank" rel="external">http://blog.csdn.net/u013815546/article/details/56481842</a></p>
<h2 id="moton使用注意事项"><a href="#moton使用注意事项" class="headerlink" title="moton使用注意事项"></a>moton使用注意事项</h2><p>【注意】包的扫描</p>
<p>每个模块都要扫描自身的项目结构<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="attr">mail-sms-admin:</span><span class="string">application.yml</span></div><div class="line"></div><div class="line"><span class="attr">motan:</span></div><div class="line"><span class="attr">  client-group:</span> <span class="string">sinosoftrpc</span></div><div class="line"><span class="attr">  client-access-log:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  server-group:</span> <span class="string">sinosoftrpc</span></div><div class="line"><span class="attr">  server-access-log:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  export-port:</span> <span class="string">$&#123;random.int[9001,9999]&#125;</span></div><div class="line"><span class="attr">  zookeeper-host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:2181</span></div><div class="line"><span class="attr">  annotaiong-package:</span> <span class="string">sinosoftgz.message.admin</span></div></pre></td></tr></table></figure></p>
<p>app模块由于将api-impl脱离出了自身的模块，通常还需要扫描api-impl的模块</p>
<p>配置pom.xml依赖 </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>sinosoftgz<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mail-sms-api-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<p>配置spring ioc扫描 AutoImportConfig.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ComponentScans</span>(&#123;</div><div class="line">        <span class="meta">@ComponentScan</span>(basePackages = &#123;<span class="string">"sinosoftgz.message.app"</span>, <span class="string">"sinosoftgz.message.api"</span>&#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>配置motan扫描 mail-sms-app:application.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="attr">motan:</span></div><div class="line"><span class="attr">  annotaiong-package:</span> <span class="string">sinosoftgz.message.app,sinosoftgz.message.api</span></div><div class="line"><span class="attr">  client-group:</span> <span class="string">sinosoftrpc</span></div><div class="line"><span class="attr">  client-access-log:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  server-group:</span> <span class="string">sinosoftrpc</span></div><div class="line"><span class="attr">  server-access-log:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  export-port:</span> <span class="string">$&#123;random.int[9001,9999]&#125;</span></div><div class="line"><span class="attr">  zookeeper-host:</span> <span class="attr">localhost:2181</span></div></pre></td></tr></table></figure>
<p>【注意】motan跨模块传输实体类时懒加载失效<br>遇到的时候注意一下，由于jpa，hibernate懒加载的问题，因为其内部使用动态代理去实现的懒加载，导致懒加载对象无法被正确的跨模块传输，此时需要进行深拷贝。<br>【正例】：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">     * 深拷贝OrderMain对象，主要用于防止Hibernate序列化懒加载Session关闭问题</span></div><div class="line"><span class="comment">     * &lt;p/&gt;</span></div><div class="line"><span class="comment">     * //     * <span class="doctag">@param</span> order</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * <span class="doctag">@return</span></span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> OrderMain <span class="title">cpyOrder</span><span class="params">(OrderMain from, OrderMain to)</span> </span>&#123;</div><div class="line">        OrderMain orderMainNew = to == <span class="keyword">null</span> ? <span class="keyword">new</span> OrderMain() : to;</div><div class="line">        Copys copys = Copys.create();</div><div class="line">        List&lt;OrderItem&gt; orderItemList = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        List&lt;SubOrder&gt; subOrders = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        List&lt;OrderGift&gt; orderGifts = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        List&lt;OrderMainAttr&gt; orderMainAttrs = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        OrderItem orderItemTmp;</div><div class="line">        SubOrder subOrderTmp;</div><div class="line">        OrderGift orderGiftTmp;</div><div class="line">        OrderMainAttr orderMainAttrTmp;</div><div class="line">        copys.from(from).excludes(<span class="string">"orderItems"</span>, <span class="string">"subOrders"</span>, <span class="string">"orderGifts"</span>, <span class="string">"orderAttrs"</span>).to(orderMainNew).clear();</div><div class="line">        <span class="keyword">if</span> (!Lang.isEmpty(from.getOrderItems())) &#123;</div><div class="line">            <span class="keyword">for</span> (OrderItem i : from.getOrderItems()) &#123;</div><div class="line">                orderItemTmp = <span class="keyword">new</span> OrderItem();</div><div class="line">                copys.from(i).excludes(<span class="string">"order"</span>).to(orderItemTmp).clear();</div><div class="line">                orderItemTmp.setOrder(orderMainNew);</div><div class="line">                orderItemList.add(orderItemTmp);</div><div class="line">            &#125;</div><div class="line">            orderMainNew.setOrderItems(orderItemList);</div><div class="line">        &#125;</div><div class="line">        SubOrderItem subOrderItem;</div><div class="line">        List&lt;SubOrderItem&gt; subOrderItemList = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keyword">if</span> (from.getSubOrders() != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">for</span> (SubOrder s : from.getSubOrders()) &#123;</div><div class="line">                subOrderTmp = <span class="keyword">new</span> SubOrder();</div><div class="line">                copys.from(s).excludes(<span class="string">"order"</span>, <span class="string">"subOrderItems"</span>).to(subOrderTmp).clear();</div><div class="line">                subOrderTmp.setOrder(from);</div><div class="line">                <span class="keyword">for</span> (SubOrderItem soi : s.getSubOrderItems()) &#123;</div><div class="line">                    subOrderItem = <span class="keyword">new</span> SubOrderItem();</div><div class="line">                    copys.from(soi).excludes(<span class="string">"order"</span>, <span class="string">"subOrder"</span>, <span class="string">"orderItem"</span>).to(subOrderItem).clear();</div><div class="line">                    subOrderItem.setOrder(orderMainNew);</div><div class="line">                    subOrderItem.setSubOrder(subOrderTmp);</div><div class="line">                    subOrderItemList.add(subOrderItem);</div><div class="line">                    <span class="keyword">if</span> (!Lang.isEmpty(soi.getOrderItem())) &#123;</div><div class="line">                        <span class="keyword">for</span> (OrderItem i : orderMainNew.getOrderItems()) &#123;</div><div class="line">                            <span class="keyword">if</span> (i.getId().equals(soi.getOrderItem().getId())) &#123;</div><div class="line">                                subOrderItem.setOrderItem(soi.getOrderItem());</div><div class="line">                            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                                subOrderItem.setOrderItem(soi.getOrderItem());</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                subOrderTmp.setSubOrderItems(subOrderItemList);</div><div class="line">                subOrders.add(subOrderTmp);</div><div class="line">            &#125;</div><div class="line">            orderMainNew.setSubOrders(subOrders);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (from.getOrderGifts() != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">for</span> (OrderGift og : from.getOrderGifts()) &#123;</div><div class="line">                orderGiftTmp = <span class="keyword">new</span> OrderGift();</div><div class="line">              copys.from(og).excludes(<span class="string">"order"</span>).to(orderGiftTmp).clear();</div><div class="line">                orderGiftTmp.setOrder(orderMainNew);</div><div class="line">                orderGifts.add(orderGiftTmp);</div><div class="line">            &#125;</div><div class="line">            orderMainNew.setOrderGifts(orderGifts);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (from.getOrderAttrs() != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">for</span> (OrderMainAttr attr : from.getOrderAttrs()) &#123;</div><div class="line">                orderMainAttrTmp = <span class="keyword">new</span> OrderMainAttr();</div><div class="line">                copys.from(attr).excludes(<span class="string">"order"</span>).to(orderMainAttrTmp).clear();</div><div class="line">                orderMainAttrTmp.setOrder(orderMainNew);</div><div class="line">                orderMainAttrs.add(orderMainAttrTmp);</div><div class="line">            &#125;</div><div class="line">            orderMainNew.setOrderAttrs(orderMainAttrs);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> orderMainNew;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="公用常量规范"><a href="#公用常量规范" class="headerlink" title="公用常量规范"></a>公用常量规范</h2><p>【强制】模块常量<br>模块自身公用的常量放置于模块的Constants 类中，以final static的方式声明<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Constants</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String birthdayPattern = <span class="string">"yyyy-MM-dd"</span>; <span class="comment">//生日格式</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String inputTimePattern = <span class="string">"yyyy-MM-dd HH:mm:ss"</span>; <span class="comment">//录入时间格式</span></div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">PolicyType</span> </span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String personal = <span class="string">"0"</span>; <span class="comment">//个单</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String group = <span class="string">"1"</span>; <span class="comment">//团单</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">InsuredNature</span> </span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String naturePerson = <span class="string">"1"</span>; <span class="comment">//自然人</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String artificialPerson = <span class="string">"0"</span>; <span class="comment">//法人</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">InsuredIdentity</span> </span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String myself = <span class="string">"0"</span>; <span class="comment">//本人</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">JfeeFlag</span> </span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String noFeeFlag = <span class="string">"0"</span>; <span class="comment">//非见费标志</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String feeFlag = <span class="string">"1"</span>; <span class="comment">//见费标志</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemKindFlag</span> </span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String mainRiskFlag = <span class="string">"1"</span>; <span class="comment">//主险标志</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String additionalRiskFlag = <span class="string">"2"</span>; <span class="comment">//附加险标志</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String otherRiskFlag = <span class="string">"3"</span>; <span class="comment">//其它标志</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CalculateAmountFlag</span> </span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String calculateFlag = <span class="string">"Y"</span>; <span class="comment">//计算保额标志</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String noCalculateFlag = <span class="string">"N"</span>; <span class="comment">//不计算保额标志</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LimitGrade</span> </span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String policyLevel = <span class="string">"1"</span>; <span class="comment">//限额/免赔保单级别</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String clauseLevel = <span class="string">"2"</span>; <span class="comment">//限额/免赔条款级别</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 批改类型</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * 命名规则：对象（可选）+行为</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EndorType</span> </span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String collectivePolicyInsuredModify = <span class="string">"22"</span>; <span class="comment">//团单变更被保险人</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String collectivePolicyInsuredAdd = <span class="string">"Z1"</span>; <span class="comment">//团单批增被保险人</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String collectivePolicyInsuredRemove = <span class="string">"J1"</span>; <span class="comment">//团单批减被保险人</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String surrender = <span class="string">"04"</span>; <span class="comment">//全单退保</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String withdraw = <span class="string">"05"</span>; <span class="comment">//注销</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String insurancePeriodModify = <span class="string">"06"</span>; <span class="comment">//平移保险期限</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String applicantModify = <span class="string">"H01"</span>; <span class="comment">//更改投保人</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String customerModify = <span class="string">"50"</span>; <span class="comment">//变更客户信息</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String insuredModify = <span class="string">"29"</span>; <span class="comment">//变更被保人职业</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String individualPolicyBeneficiaryModify = <span class="string">"03"</span>; <span class="comment">//变更受益人信息</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String engageModify = <span class="string">"15"</span>; <span class="comment">//变更特别约定</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String individualPolicyInsuredModify = <span class="string">"77"</span>;<span class="comment">//个单变更被保人</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Constants类在一个限界上下文只能有一个，一个限界上下文包含了一整个业务模块（如policy-admin,policy-admin,policy-api,policy-model）<br>构成一个限界上下文</p>
<p>在Constants类中使用静态内部类尽量细化到常量的归属，不要散放</p>
<p>【强制】项目常量<br>项目公用的常量放置于util模块的GlobalContants类中，以内部类和final static的方式声明</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalContants</span> </span>&#123;</div><div class="line">	<span class="comment">/**</span></div><div class="line"><span class="comment">     * 返回的状态</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseStatus</span></span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SUCCESS = <span class="string">"success"</span>;<span class="comment">//成功</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ERROR = <span class="string">"error"</span>;<span class="comment">//错误</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line"><span class="comment">	 * 响应状态</span></div><div class="line"><span class="comment">	 */</span></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseString</span></span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String STATUS = <span class="string">"status"</span>;<span class="comment">//状态</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ERROR_CODE = <span class="string">"error"</span>;<span class="comment">// 错误代码</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String MESSAGE = <span class="string">"message"</span>;<span class="comment">//消息</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DATA = <span class="string">"data"</span>;<span class="comment">//数据</span></div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="领域模型规范"><a href="#领域模型规范" class="headerlink" title="领域模型规范"></a>领域模型规范</h2><h3 id="javabean规范"><a href="#javabean规范" class="headerlink" title="javabean规范"></a>javabean规范</h3><p>（一些像驼峰命名法之类通用的规范就不说了，强调一些可能会犯错的规范）<br>【强制】BigDecimal规范<br>【说明】业务实体类中的与金额相关的变量统一使用BigDecimal,四则运算采用BigDecimal的相关api进行，<br>做除法时需要额外注意保留精度的问题，否则可能会报异常，并且不易被测试出<br>【正例】<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">BigDecimal totalMoney = <span class="keyword">new</span> BigDecimal(<span class="string">"100.42"</span>);</div><div class="line">BigDecimal averageMoney = totalMoney.divide(<span class="keyword">new</span> BigDecimal(<span class="string">"22"</span>),<span class="number">2</span>);</div></pre></td></tr></table></figure></p>
<p>【强制】布尔类型规范<br>【说明】所有的布尔类型不允许以is开头，否则会导致部分序列化，hibernate框架出现解析异常。<br>【反例】<br>原来项目的BaseDomain中标记逻辑删除的字段,在部分场景下会出现问题<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Column</span>(name = <span class="string">"is_delete"</span>)</div><div class="line"><span class="keyword">private</span> Boolean isDelete = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> Boolean <span class="title">getIsDelete</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> isDelete;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIsDelete</span><span class="params">(Boolean isDelete)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(deleteFlag)</div><div class="line">        <span class="keyword">this</span>.deleteDate = <span class="keyword">new</span> Date();</div><div class="line">    <span class="keyword">this</span>.isDelete = isDelete;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>tips: 使用intellij idea的快捷键（for eclipse）alt+shift+r，<br>或者菜单栏Refactor-&gt;Rename，可以重构字段名称<br>【正例】<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Column</span>(name = <span class="string">"is_delete"</span>)</div><div class="line"><span class="keyword">private</span> Boolean deleteFlag = <span class="keyword">false</span>;</div></pre></td></tr></table></figure></p>
<p>【推荐】装箱类型优于原生类型<br>在业务代码中，更加推荐使用装箱类型Integer Double Boolean…<br>【说明】在未设值的情况下，原生类型具有默认值，而装箱类型为null<br>以Boolean类型为例，如果使用boolean，那么在未复制时，无法得知其到底是被赋值成了false，<br>还是为赋值</p>
<h2 id="其他常用的领域模型"><a href="#其他常用的领域模型" class="headerlink" title="其他常用的领域模型"></a>其他常用的领域模型</h2><p>首先理解各个常用的领域模型的含义：</p>
<table>
<thead>
<tr>
<th>领域模型</th>
<th>全称</th>
<th>中文含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>DO</td>
<td>Domain Object</td>
<td>领域对象</td>
</tr>
<tr>
<td>DTO</td>
<td>Data Transfer Object</td>
<td>数据传输对象</td>
</tr>
<tr>
<td>VO</td>
<td>View Object</td>
<td>视图对象</td>
</tr>
</tbody>
</table>
<p>对于View Object，PO等等其他一些的对象不在此做要求，只说明一下常用的几个<br>DO就是我们最常用的数据库持久对象，是OOP对于现实中的抽象，一般使用orm框架映射到数据库<br>DTO这一层，目前我们的项目还没有投入使用，即将考虑投入使用，理论上来说，两个微服务模块是严禁共享数据库的<br>所以A模块要查询B模块的数据，需要使用B模块app层暴露出来的api来查询，其中B模块返回的实体，不能是直接从数据库中<br>查询出来的DO，而应该是DO转换而成的DTO。以及其他服务服务用语传输的变量，都叫做DTO<br>VO就是常存在于视图层模板渲染使用的实体类</p>
<p>tips：DO最特殊的一点在于，它拥有主键，而DTO不应该包含数据库的主键</p>
<p>【推荐】领域模型命名规范<br>【说明】由于DO这一层大家已经养成了习惯，不做要求了。DTO有些特殊，他常常与业务的传输对象相关，而不限于<br>以DTO结尾，如xxxQuery也可以是DTO对象。VO对象推荐以VO结尾。注意：不要命名为Vo,Dto。</p>

           
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://lexburner.github.io/2017/08/25/一些需要普及的项目规范/" data-id="cj6yiswvl002ae0ud5iewzlj6" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://lexburner.github.io/2017/08/25/一些需要普及的项目规范/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://lexburner.github.io/2017/08/25/一些需要普及的项目规范/">评论</a>
    

        </footer>
    </div>
	
		<! -- 添加捐赠图标 -->
<div class ="post-donate">
    <div id="donate_board" class="donate_bar center">
        <a id="btn_donate" class="btn_donate" href="javascript:;" title="打赏"></a>
        <span class="donate_txt">
           &uarr;<br>
		   大吉大利，今晚吃鸡。
        </span>
        <br>
      </div>  
	<div id="donate_guide" class="donate_bar center hidden" >
		<div>
			<span class="donate-title">支付宝</span>
			<span class="donate-title">微信</span>
		</div>
		<div>
			<!-- 支付宝打赏图案 -->
			<img src="/css/images/alipay.png"  alt="支付宝打赏"> 
			<!-- 微信打赏图案 -->
			<img src="/css/images/wechatpay.png" alt="微信打赏">  
		</div>
    </div>
	<script type="text/javascript">
		document.getElementById('btn_donate').onclick = function(){
			$('#donate_board').addClass('hidden');
			$('#donate_guide').removeClass('hidden');
		}
	</script>
</div>
<! -- 添加捐赠图标 -->
	
    
        
<nav id="article-nav">
    
        <a href="/2017/08/26/XML与javabean的转换/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    XML与javabean的转换
                
            </div>
        </a>
    
    
        <a href="/2017/08/22/博客搬家/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">博客搬家</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/08/26/XML与javabean的转换/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/JAVA/">JAVA</a></p>
                            <p class="item-title"><a href="/2017/08/26/XML与javabean的转换/" class="title">XML与javabean的转换</a></p>
                            <p class="item-date"><time datetime="2017-08-25T19:41:27.000Z" itemprop="datePublished">2017-08-26</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/08/25/一些需要普及的项目规范/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术杂谈/">技术杂谈</a></p>
                            <p class="item-title"><a href="/2017/08/25/一些需要普及的项目规范/" class="title">一些需要普及的项目规范</a></p>
                            <p class="item-date"><time datetime="2017-08-25T04:18:45.000Z" itemprop="datePublished">2017-08-25</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/08/22/博客搬家/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/banner/1.jpg)" alt="博客搬家" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术杂谈/">技术杂谈</a></p>
                            <p class="item-title"><a href="/2017/08/22/博客搬家/" class="title">博客搬家</a></p>
                            <p class="item-date"><time datetime="2017-08-22T08:38:44.000Z" itemprop="datePublished">2017-08-22</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/08/21/一个DDD指导下的实体类设计案例/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/领域驱动设计/">领域驱动设计</a></p>
                            <p class="item-title"><a href="/2017/08/21/一个DDD指导下的实体类设计案例/" class="title">一个DDD指导下的实体类设计案例</a></p>
                            <p class="item-date"><time datetime="2017-08-21T07:59:52.000Z" itemprop="datePublished">2017-08-21</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/08/16/使用spring validation完成数据后端校验/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Spring/">Spring</a></p>
                            <p class="item-title"><a href="/2017/08/16/使用spring validation完成数据后端校验/" class="title">使用spring validation完成数据后端校验</a></p>
                            <p class="item-date"><time datetime="2017-08-16T07:52:52.000Z" itemprop="datePublished">2017-08-16</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/">DevOps</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud/">Spring Cloud</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Security-OAuth2/">Spring Security OAuth2</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术杂谈/">技术杂谈</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/架构设计/">架构设计</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/规则引擎/">规则引擎</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/领域驱动设计/">领域驱动设计</a><span class="category-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/DevOps/" style="font-size: 12px;">DevOps</a> <a href="/tags/JAVA/" style="font-size: 20px;">JAVA</a> <a href="/tags/JMM/" style="font-size: 10px;">JMM</a> <a href="/tags/RPC/" style="font-size: 10px;">RPC</a> <a href="/tags/Spring/" style="font-size: 14px;">Spring</a> <a href="/tags/Spring-Cloud/" style="font-size: 10px;">Spring Cloud</a> <a href="/tags/Spring-Cloud-Zuul/" style="font-size: 12px;">Spring Cloud Zuul</a> <a href="/tags/Spring-Security-OAuth2/" style="font-size: 14px;">Spring Security OAuth2</a> <a href="/tags/Validation/" style="font-size: 12px;">Validation</a> <a href="/tags/XML/" style="font-size: 10px;">XML</a> <a href="/tags/Zipkin/" style="font-size: 10px;">Zipkin</a> <a href="/tags/drools/" style="font-size: 16px;">drools</a> <a href="/tags/lua/" style="font-size: 10px;">lua</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/zookeeper/" style="font-size: 10px;">zookeeper</a> <a href="/tags/事务/" style="font-size: 10px;">事务</a> <a href="/tags/代码规范/" style="font-size: 10px;">代码规范</a> <a href="/tags/多线程/" style="font-size: 18px;">多线程</a> <a href="/tags/微服务/" style="font-size: 10px;">微服务</a> <a href="/tags/技术杂谈/" style="font-size: 12px;">技术杂谈</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/杂谈/" style="font-size: 10px;">杂谈</a> <a href="/tags/求职/" style="font-size: 10px;">求职</a> <a href="/tags/规则引擎/" style="font-size: 16px;">规则引擎</a> <a href="/tags/领域驱动设计/" style="font-size: 12px;">领域驱动设计</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="https://www.zhihu.com/people/xu-jing-feng-29/activities">我的知乎</a>
                    </li>
                
                    <li>
                        <a href="https://ntzyz.io/">namespace_ntzyz</a>
                    </li>
                
                    <li>
                        <a href="http://blog.didispace.com/">程序猿DD|博客</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 徐靖峰<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'http://lexburner.github.io/2017/08/25/一些需要普及的项目规范/';
        
        this.page.identifier = '一些需要普及的项目规范';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'hexo-theme-icarus' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>



    
        <script src="/vendor/lightgallery/js/lightgallery.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-pager.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-hash.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-share.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-video.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>